# دليل التطبيق المحلي - أزياء قرطبة

## نظرة عامة

تم تحويل موقع أزياء قرطبة إلى تطبيق محلي كامل يعمل على سطح المكتب مع الميزات التالية:

### 🖥️ **الميزات الرئيسية**
- **تطبيق محلي**: يعمل بدون إنترنت
- **تخزين محلي**: قاعدة بيانات SQLite محلية
- **مزامنة سحابية**: مزامنة تلقائية مع Supabase
- **واجهة محلية**: واجهة مستخدم محسنة للتطبيق المحلي
- **نظام إشعارات**: إشعارات النظام
- **قائمة النظام**: وصول سريع من شريط المهام

## 🚀 التثبيت والتشغيل

### 1. متطلبات النظام
- **Windows**: Windows 10 أو أحدث
- **macOS**: macOS 10.14 أو أحدث  
- **Linux**: Ubuntu 18.04 أو أحدث
- **الذاكرة**: 4GB RAM كحد أدنى
- **التخزين**: 500MB مساحة فارغة

### 2. التثبيت

#### أ. التطوير
```bash
# تثبيت التبعيات
npm install

# تشغيل في وضع التطوير
npm run electron:dev
```

#### ب. بناء التطبيق
```bash
# بناء للتطوير
npm run electron:build

# بناء لنظام Windows
npm run electron:build:win

# بناء لنظام macOS
npm run electron:build:mac

# بناء لنظام Linux
npm run electron:build:linux
```

### 3. التثبيت على النظام

#### Windows
1. شغل ملف `أزياء قرطبة Setup.exe`
2. اتبع معالج التثبيت
3. التطبيق سيكون متاحاً في قائمة ابدأ

#### macOS
1. افتح ملف `أزياء قرطبة.dmg`
2. اسحب التطبيق إلى مجلد Applications
3. التطبيق سيكون متاحاً في Launchpad

#### Linux
1. شغل ملف `أزياء قرطبة.AppImage`
2. أو استخدم: `sudo dpkg -i أزياء قرطبة.deb`

## 💾 التخزين المحلي

### 1. قاعدة البيانات المحلية
- **النوع**: SQLite
- **الموقع**: `%APPDATA%/أزياء قرطبة/qurtuba-local.db`
- **النسخ الاحتياطي**: تلقائي مع المزامنة

### 2. البيانات المحفوظة محلياً
- **العملاء**: جميع بيانات العملاء
- **الفواتير**: الفواتير والمدفوعات
- **الطلبات**: طلبات الخياطة
- **الصور**: صور القماش
- **الإعدادات**: إعدادات التطبيق

### 3. المزامنة
- **تلقائية**: كل 5 دقائق عند الاتصال
- **يدوية**: من قائمة الملف أو شريط المهام
- **قسرية**: عند وجود تعارضات

## 🔄 المزامنة السحابية

### 1. إعداد المزامنة
1. تأكد من وجود متغيرات البيئة:
   ```
   VITE_SUPABASE_URL=your_supabase_url
   VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
   ```

2. التطبيق سيتصل تلقائياً بـ Supabase

### 2. أنواع المزامنة

#### أ. مزامنة تلقائية
- **التردد**: كل 5 دقائق
- **الشروط**: عند الاتصال بالإنترنت
- **البيانات**: التغييرات الجديدة فقط

#### ب. مزامنة يدوية
- **من القائمة**: ملف > مزامنة البيانات
- **من شريط المهام**: كليك يمين > مزامنة البيانات
- **اختصار**: Ctrl+S

#### ج. مزامنة قسرية
- **الاستخدام**: عند وجود تعارضات
- **الوظيفة**: تحميل جميع البيانات من السحابة

### 3. حالة المزامنة
- **متصل**: ✅ مزامنة نشطة
- **غير متصل**: ⚠️ وضع عدم الاتصال
- **معلق**: 🔄 جاري المزامنة
- **خطأ**: ❌ فشل المزامنة

## 🛠️ الميزات المتقدمة

### 1. واجهة المستخدم
- **قائمة عربية**: قائمة تطبيق باللغة العربية
- **اختصارات لوحة المفاتيح**: اختصارات سريعة
- **إشعارات النظام**: إشعارات المزامنة والحالة

### 2. شريط المهام
- **أيقونة التطبيق**: وصول سريع
- **قائمة السياق**: مزامنة وإعدادات
- **إشعارات**: حالة المزامنة

### 3. الأمان
- **تشفير البيانات**: تشفير البيانات المحلية
- **النسخ الاحتياطي**: نسخ احتياطي تلقائي
- **الاسترداد**: استرداد البيانات عند الحاجة

## 📱 العمل بدون إنترنت

### 1. الميزات المتاحة
- **عرض البيانات**: جميع البيانات المحفوظة
- **إضافة عملاء**: إضافة عملاء جدد
- **إنشاء فواتير**: إنشاء فواتير جديدة
- **تعديل البيانات**: تعديل البيانات الموجودة

### 2. المزامنة عند الاتصال
- **تلقائية**: مزامنة فورية عند الاتصال
- **ذكية**: مزامنة التغييرات فقط
- **آمنة**: حل التعارضات تلقائياً

### 3. إدارة البيانات
- **عرض البيانات المحلية**: جميع البيانات المحفوظة
- **تصدير البيانات**: تصدير للنسخ الاحتياطي
- **استيراد البيانات**: استيراد من النسخ الاحتياطي

## 🔧 استكشاف الأخطاء

### 1. مشاكل المزامنة
```
المشكلة: فشل المزامنة
الحل: تحقق من اتصال الإنترنت وإعدادات Supabase
```

### 2. مشاكل قاعدة البيانات
```
المشكلة: خطأ في قاعدة البيانات المحلية
الحل: احذف ملف qurtuba-local.db لإعادة الإنشاء
```

### 3. مشاكل التطبيق
```
المشكلة: التطبيق لا يفتح
الحل: أعد تشغيل التطبيق أو أعد التثبيت
```

## 📊 مراقبة الأداء

### 1. حالة النظام
- **الذاكرة المستخدمة**: مراقبة استهلاك الذاكرة
- **مساحة التخزين**: مراقبة مساحة قاعدة البيانات
- **سرعة المزامنة**: مراقبة سرعة المزامنة

### 2. سجلات النظام
- **سجل المزامنة**: تتبع عمليات المزامنة
- **سجل الأخطاء**: تتبع الأخطاء والمشاكل
- **سجل الأداء**: مراقبة أداء التطبيق

## 🚀 التطوير والتخصيص

### 1. إضافة ميزات جديدة
```typescript
// إضافة دالة جديدة في LocalAppService
public async newFeature(): Promise<any> {
  if (this.config.isElectron) {
    return await (window as any).electronAPI.local.newFeature();
  }
  // Fallback to cloud
}
```

### 2. تخصيص المزامنة
```typescript
// تحديث إعدادات المزامنة
localAppService.updateConfig({
  autoSync: true,
  syncInterval: 10 // 10 minutes
});
```

### 3. إضافة واجهات جديدة
```typescript
// إضافة IPC handler جديد
ipcMain.handle('local:newFeature', async (_, data) => {
  return await localDB.newFeature(data);
});
```

## 📋 قائمة المهام

### ✅ مكتمل
- [x] إعداد Electron
- [x] قاعدة البيانات المحلية
- [x] خدمة المزامنة
- [x] واجهة المزامنة
- [x] العمل بدون إنترنت

### 🔄 قيد التطوير
- [ ] نسخ احتياطي تلقائي
- [ ] تشفير البيانات
- [ ] إشعارات متقدمة
- [ ] تقارير الأداء

### 📅 مخطط
- [ ] دعم متعدد المستخدمين
- [ ] مزامنة بين الأجهزة
- [ ] تطبيق موبايل
- [ ] API خارجي

## 🆘 الدعم الفني

### 1. المشاكل الشائعة
- **التطبيق بطيء**: أعد تشغيل التطبيق
- **المزامنة لا تعمل**: تحقق من الإنترنت
- **البيانات مفقودة**: استخدم المزامنة القسرية

### 2. الحصول على المساعدة
- **السجلات**: تحقق من سجلات النظام
- **الإعدادات**: تحقق من إعدادات المزامنة
- **الدعم**: تواصل مع فريق الدعم

### 3. النسخ الاحتياطي
- **تلقائي**: مع كل مزامنة
- **يدوي**: من قائمة الملف
- **استرداد**: من النسخ الاحتياطي

---

**أزياء قرطبة** - نظام إدارة الأزياء والتطريز المحلي والسحابي 🎨✨
